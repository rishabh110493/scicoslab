<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>ModelicaBlocks</TITLE>
<META NAME="description" CONTENT="ModelicaBlocks">
<META NAME="keywords" CONTENT="ModelicaBlocks">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="ModelicaBlocks.css">

</HEAD>

<BODY bgcolor="#FFFFFF">

<P>
<DIV ALIGN="CENTER">
Modelica
<BR><A NAME="tex2html1"
  HREF="../../fr/scicos/ModelicaBlocks.htm">fr</A> - <A NAME="tex2html2"
  HREF="./ModelicaBlocks.htm">eng</A>

</DIV>
<BR><A NAME="SECTION00010000000000000000"></A><A NAME="ModelicaBlocks"></A>
<BR>
<b>ModelicaBlocks</b> - Creating and using Modelica blocks in Scicos


<H3><font color="blue"><A NAME="SECTION00011000000000000000">
Module</A>
</font></H3>

<UL>
<LI><A NAME="tex2html3"
  HREF="whatis_scicos.htm">Scicos</A>
</LI>
</UL>
<H3><font color="blue"><A NAME="SECTION00012000000000000000">
Modelica Blocks in Scicos</A>
</font></H3>
First method: Using a <A NAME="tex2html4"
  HREF="MBLOCK.htm">Modelica generic block</A>
(available in the <A NAME="tex2html5"
  HREF="Others_pal.htm">Others</A>
palette).
Using this block, you do not need writing the  interfacing 
function for the block, just define the input/output variable names and 
variable types and then write the Modelica program.

<P>
Second method: Beside your Modelica program, you need to define an
interfacing function for your block. In the interfacing function, the
name of the joint Modelica model, input/output variable names,
input/output types (explicit or implicit), as well as the dialog box
for modifying the the block parameters in Scicos can be defined.
Several examples of Modelica blocks are available in
<A NAME="tex2html6"
  HREF="Electrical_pal.htm">Electrical</A>
and
<A NAME="tex2html7"
  HREF="ThermoHydraulics_pal.htm">Thermo-Hydraulics</A>
palettes.

<P>
Remind that, once the interfacing function built, it should be loaded in Scilab, by
executing this command in Scilab:

<P>
<TT>getf("myblock.sci");</TT>

<P>
You can load your block using "add new block" item in the
"Edit" menu of Scicos.

<P>

<H3><font color="blue"><A NAME="SECTION00013000000000000000">
Modelica Libraries in Scicos</A>
</font></H3>
The Modelica model corresponding to the Scicos block is defined inside a 
Modelica package. The directory where Modelica packages are located 
should be declared with the <B>"modelica_libs"</B> variable. e.g., if
you have defined your Modelica fiels in the MyModelicalibs, you should
execute this command in Scilab to inform the Modelica compiler about
the location of Modelica libraries:

<P>
<TT>modelica_libs=[modelica_libs,'MyModelicalibs']</TT>

<P>
The Modelica compiler looks for all Modelica files in the directories 
given by <B>"modelica_libs"</B> and use them for compile the main Modelica 
model generated by Scicos.

<P>

<H3><font color="blue"><A NAME="SECTION00014000000000000000">
External Functions</A>
</font></H3>
You can define and use external functions in your Modelica
model. External functions can be written in C or Fortran languages.
In order to use an external function in a Modeli model, the Modelica function prototype defining
inputs and output of the external function, the header file (*.h) of
the external function, and a *.DLL (Windows) or *.SO (Unix) library
are required.

<P>

<H3><A NAME="SECTION00014100000000000000">
Example of a Modelica function prototype:</A>
</H3>
<PRE>
function Optimal
   input Real x;
   input Real y;
   output Real Optimal_out;
external;
end Optimal;
</PRE>

<P>

<H3><A NAME="SECTION00014200000000000000">
Example of a header file (Optimal.h):</A>
</H3>
<PRE>
#include "Maths.h"
double Optimal(double x,double y);
</PRE>

<P>
The modelica compiler looks for required external libraries in the
directories given by <B>"modelica_libs"</B>. The user can place the
Modelica model, the header file, and the libraries in a directory e.g.,
Mylibs and then in Scilab execute the command:

<P>
<TT>modelica_libs=[modelica_libs,'Mylibs']</TT>

<H3><font color="blue"><A NAME="SECTION00015000000000000000">
Authors</A>
</font></H3>
<b>Masoud Najafi</b> INRIA

<BR>




</BODY>
</HTML>
